<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ® GameBox Dashboard</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <div class="app-container">
        <!-- SIDEBAR -->
        <aside class="sidebar">
            <div class="logo">
                <i class="fa-solid fa-gamepad"></i>
                <h1>GameBox</h1>
            </div>
            <nav>
                <ul>
                    <li class="active" data-page="home">
                        <i class="fa-solid fa-house"></i> ğŸ  Home
                    </li>
                    <li data-page="games">
                        <i class="fa-solid fa-list"></i> ğŸ® Jogos
                    </li>
                    <li data-page="management">
                        <i class="fa-solid fa-users-gear"></i> ğŸ‘¥ GestÃ£o
                    </li>
                    <li data-page="settings">
                        <i class="fa-solid fa-gear"></i> âš™ï¸ ConfiguraÃ§Ãµes
                    </li>
                </ul>
            </nav>
            <div class="bot-status-card">
                <div class="status-indicator" id="bot-status-indicator"></div>
                <span id="bot-status-text">ğŸ”´ Desconectado</span>
            </div>
        </aside>

        <main class="content">
            <!-- HOME PAGE -->
            <div id="home" class="page active">
                <header>
                    <h2>ğŸ“Š Dashboard</h2>
                    <div>
                        <button class="btn primary hidden" id="btn-connect">
                            <i class="fa-solid fa-plug"></i> Conectar Bot
                        </button>
                        <button class="btn danger hidden" id="btn-disconnect">
                            <i class="fa-solid fa-plug-circle-xmark"></i> Desconectar
                        </button>
                    </div>
                </header>

                <div class="stats-grid">
                    <div class="card stat-card">
                        <i class="fa-solid fa-users"></i>
                        <div class="info">
                            <h3>ğŸ‘¥ UsuÃ¡rios Ativos</h3>
                            <p id="stat-users">0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <i class="fa-solid fa-gamepad"></i>
                        <div class="info">
                            <h3>ğŸ® Total de Jogos</h3>
                            <p id="stat-games">0</p>
                        </div>
                    </div>
                    <div class="card stat-card">
                        <i class="fa-solid fa-box-open"></i>
                        <div class="info">
                            <h3>ğŸ“¦ Caixas Abertas</h3>
                            <p id="stat-boxes">0</p>
                        </div>
                    </div>
                </div>

                <div class="card recent-activity">
                    <h3>ğŸ“ Atividade Recente</h3>
                    <ul id="activity-log">
                        <li><span class="timestamp">[--:--:--]</span> â³ Aguardando conexÃ£o...</li>
                    </ul>
                </div>
            </div>

            <!-- GAMES PAGE -->
            <div id="games" class="page">
                <header>
                    <h2>ğŸ® Gerenciar Jogos</h2>
                    <div style="display: flex; gap: 10px;">
                        <button class="btn secondary" id="btn-sync-igdb">
                            <i class="fa-solid fa-rotate"></i> ğŸ”„ Auto-Sync
                        </button>
                        <button class="btn secondary" id="btn-import-igdb">
                            <i class="fa-solid fa-cloud-arrow-down"></i> â˜ï¸ Importar IGDB
                        </button>
                        <button class="btn primary" id="btn-add-game">
                            <i class="fa-solid fa-plus"></i> â• Novo Jogo
                        </button>
                    </div>
                </header>

                <div class="card">
                    <div class="card-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <div class="filters" style="display: flex; gap: 10px;">
                            <input type="text" id="search-games" placeholder="ğŸ” Buscar jogo..." style="width: 250px;">
                            <select id="filter-rarity">
                                <option value="">ğŸ¯ Todas as Raridades</option>
                                <option value="E">E - Comum</option>
                                <option value="D">D - Incomum</option>
                                <option value="C">C - Raro</option>
                                <option value="B">B - Ã‰pico</option>
                                <option value="A">A - LendÃ¡rio</option>
                                <option value="S">S - MÃ­tico</option>
                                <option value="SS">SS - Ultra Raro</option>
                                <option value="SSS">SSS - Supremo</option>
                            </select>
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="games-table">
                            <thead>
                                <tr>
                                    <th>#ï¸âƒ£ ID</th>
                                    <th>ğŸ® Nome</th>
                                    <th>â­ Raridade</th>
                                    <th>ğŸ•¹ï¸ Console</th>
                                    <th>ğŸ“… Ano</th>
                                    <th>ğŸ”§ AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- MANAGEMENT PAGE -->
            <div id="management" class="page">
                <header>
                    <h2>ğŸ‘¥ GestÃ£o do Sistema</h2>
                </header>

                <!-- Users Section -->
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3>ğŸ‘¤ UsuÃ¡rios</h3>
                        <div class="filters" style="margin: 0;">
                            <input type="text" id="search-users" placeholder="ğŸ” Buscar usuÃ¡rio..."
                                style="width: 250px;">
                        </div>
                    </div>

                    <div class="table-container">
                        <table id="users-table">
                            <thead>
                                <tr>
                                    <th>ğŸ‘¤ UsuÃ¡rio</th>
                                    <th>ğŸ’° Moedas</th>
                                    <th>ğŸ“¦ Caixas</th>
                                    <th>ğŸ® Jogos (XP)</th>
                                    <th>ğŸ“Š Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Commands Section -->
                <div class="card">
                    <div class="card-header"
                        style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                        <h3>âŒ¨ï¸ Comandos do Bot</h3>
                        <button class="btn primary small" id="btn-add-command">
                            <i class="fa-solid fa-plus"></i> â• Criar Comando
                        </button>
                    </div>

                    <div class="table-container">
                        <table id="commands-table">
                            <thead>
                                <tr>
                                    <th>ğŸ’¬ Comando</th>
                                    <th>ğŸ“‹ Tipo</th>
                                    <th>ğŸ“ DescriÃ§Ã£o</th>
                                    <th>ğŸ” NÃ­vel</th>
                                    <th>â±ï¸ Cooldown</th>
                                    <th>âœ… Status</th>
                                    <th>ğŸ”§ AÃ§Ãµes</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Populated by JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- SETTINGS PAGE -->
            <div id="settings" class="page">
                <header>
                    <h2>âš™ï¸ ConfiguraÃ§Ãµes</h2>
                </header>

                <div class="settings-grid">
                    <div class="card">
                        <h3>ğŸ¤– ConfiguraÃ§Ãµes do Bot</h3>
                        <div class="form-group">
                            <label>ğŸ“› Nome do Bot</label>
                            <input type="text" id="conf-bot-name" placeholder="MeuBotTwitch">
                        </div>
                        <div class="form-group">
                            <label>ğŸ”‘ OAuth Token</label>
                            <input type="password" id="conf-token" placeholder="oauth:...">
                        </div>
                        <div class="form-group">
                            <label>ğŸ“º Canais (separados por vÃ­rgula)</label>
                            <input type="text" id="conf-channel" placeholder="canal1, canal2">
                        </div>
                    </div>

                    <div class="card">
                        <h3>ğŸ’° Sistema de Moedas</h3>
                        <div class="form-group">
                            <label>ğŸ’µ Nome da Moeda</label>
                            <input type="text" id="conf-currency" placeholder="Coins">
                        </div>
                        <div class="form-group">
                            <label>ğŸ’ PreÃ§o da Caixa</label>
                            <input type="number" id="conf-price" placeholder="100">
                        </div>
                        <div class="form-group">
                            <label>â° Intervalo do Timer (segundos)</label>
                            <input type="number" id="conf-timer-interval" placeholder="600">
                        </div>
                        <div class="form-group">
                            <label>ğŸ Moedas por Timer</label>
                            <input type="number" id="conf-timer-amount" placeholder="50">
                        </div>
                    </div>

                    <div class="card">
                        <h3>ğŸ Recompensas</h3>
                        <div class="form-group">
                            <label>â­ Moedas por Sub</label>
                            <input type="number" id="conf-sub-amount" placeholder="500">
                        </div>
                        <div class="form-group">
                            <label>ğŸ‰ Moedas por Gift Sub</label>
                            <input type="number" id="conf-gift-amount" placeholder="250">
                        </div>
                        <div class="form-group">
                            <label>ğŸ’œ Moedas por Bit</label>
                            <input type="number" id="conf-bit-amount" placeholder="1">
                        </div>
                    </div>

                    <div class="card">
                        <h3>ğŸ® IntegraÃ§Ã£o IGDB</h3>
                        <p style="font-size: 0.8rem; color: var(--text-muted); margin-bottom: 10px;">
                            â„¹ï¸ NecessÃ¡rio para importar jogos automaticamente.
                            <a href="https://dev.twitch.tv/console" target="_blank" style="color: var(--primary);">
                                ğŸ”— Obter credenciais
                            </a>
                        </p>
                        <div class="form-group">
                            <label>ğŸ†” Client ID</label>
                            <input type="text" id="conf-igdb-id" placeholder="Client ID da Twitch">
                        </div>
                        <div class="form-group">
                            <label>ğŸ” Client Secret</label>
                            <input type="password" id="conf-igdb-secret" placeholder="Client Secret da Twitch">
                        </div>
                    </div>

                    <div class="card" style="grid-column: span 3;">
                        <h3>â­ Sistema de XP e NÃ­veis</h3>
                        <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 15px;">
                            ğŸ“Š Defina os nÃ­veis, XP necessÃ¡rio e tÃ­tulos.
                        </p>

                        <div class="table-container" style="max-height: 300px; overflow-y: auto;">
                            <table id="levels-table">
                                <thead>
                                    <tr>
                                        <th>ğŸ”¢ NÃ­vel</th>
                                        <th>âœ¨ XP NecessÃ¡rio</th>
                                        <th>ğŸ† TÃ­tulo</th>
                                        <th>ğŸ—‘ï¸ AÃ§Ãµes</th>
                                    </tr>
                                </thead>
                                <tbody id="levels-table-body">
                                    <!-- Populated by JS -->
                                </tbody>
                            </table>
                        </div>
                        <button class="btn secondary" id="btn-add-level" style="margin-top: 10px; width: 100%;">
                            <i class="fa-solid fa-plus"></i> â• Adicionar NÃ­vel
                        </button>
                    </div>

                    <!-- DANGER ZONE -->
                    <div class="card" style="grid-column: span 3; border: 2px solid #ff5555;">
                        <h3 style="color: #ff5555;">âš ï¸ Zona de Perigo</h3>
                        <p style="color: var(--text-muted); font-size: 0.9rem; margin-bottom: 15px;">
                            ğŸš¨ AÃ§Ãµes irreversÃ­veis que resetam todos os dados do sistema.
                        </p>

                        <div
                            style="background: rgba(255, 85, 85, 0.1); padding: 15px; border-radius: 8px; border: 1px solid rgba(255, 85, 85, 0.3);">
                            <h4 style="margin-top: 0; color: #ff5555;">ğŸ—‘ï¸ Resetar Banco de Dados</h4>
                            <p style="font-size: 0.85rem; color: var(--text-muted); margin-bottom: 10px;">
                                Esta aÃ§Ã£o irÃ¡ <strong>deletar permanentemente</strong>:
                            </p>
                            <ul
                                style="font-size: 0.85rem; color: var(--text-muted); margin-left: 20px; margin-bottom: 15px;">
                                <li>ğŸ‘¥ Todos os usuÃ¡rios e seus inventÃ¡rios</li>
                                <li>ğŸ® Todos os jogos cadastrados</li>
                                <li>âŒ¨ï¸ Todos os comandos customizados</li>
                                <li>ğŸ“Š HistÃ³rico de XP e nÃ­veis</li>
                            </ul>
                            <button class="btn danger" id="btn-reset-database" style="width: 100%;">
                                <i class="fa-solid fa-triangle-exclamation"></i> ğŸ’£ Resetar Tudo
                            </button>
                        </div>
                    </div>
                </div>

                <button class="btn primary" id="btn-save-settings" style="margin-top: 25px;">
                    <i class="fa-solid fa-floppy-disk"></i> ğŸ’¾ Salvar ConfiguraÃ§Ãµes
                </button>
            </div>
        </main>
    </div>

    <!-- MODAL: Adicionar/Editar Jogo -->
    <div id="game-modal" class="modal hidden">
        <div class="modal-content">
            <h3 id="modal-title">â• Adicionar Jogo</h3>
            <form id="game-form">
                <input type="hidden" id="game-id">
                <div class="form-group">
                    <label>ğŸ® Nome</label>
                    <input type="text" id="game-name" required>
                </div>
                <div class="form-group">
                    <label>â­ Raridade</label>
                    <select id="game-rarity" required>
                        <option value="E">E - Comum</option>
                        <option value="D">D - Incomum</option>
                        <option value="C">C - Raro</option>
                        <option value="B">B - Ã‰pico</option>
                        <option value="A">A - LendÃ¡rio</option>
                        <option value="S">S - MÃ­tico</option>
                        <option value="SS">SS - Ultra Raro</option>
                        <option value="SSS">SSS - Supremo</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>ğŸ•¹ï¸ Console</label>
                    <input type="text" id="game-console" required>
                </div>
                <div class="form-group">
                    <label>ğŸ“… Ano</label>
                    <input type="number" id="game-year" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn" onclick="closeModal()">âŒ Cancelar</button>
                    <button type="submit" class="btn primary">ğŸ’¾ Salvar</button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL: ImportaÃ§Ã£o IGDB -->
    <div id="igdb-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 700px;">
            <h3>â˜ï¸ Importar do IGDB</h3>
            <div style="display: flex; gap: 10px; margin-bottom: 20px;">
                <input type="text" id="igdb-search-input" placeholder="ğŸ” Digite o nome do jogo..."
                    style="flex: 1; padding: 10px; border-radius: 8px; border: 1px solid var(--glass-border); background: rgba(0,0,0,0.3); color: #fff;">
                <button class="btn primary" id="btn-igdb-search">
                    <i class="fa-solid fa-search"></i> ğŸ” Buscar
                </button>
            </div>

            <div id="igdb-loading" class="hidden" style="text-align: center; padding: 20px;">
                <i class="fa-solid fa-spinner fa-spin" style="font-size: 2rem; color: var(--primary);"></i>
                <p>â³ Buscando...</p>
            </div>

            <div class="table-container" style="max-height: 400px; overflow-y: auto;">
                <table id="igdb-results-table">
                    <thead>
                        <tr>
                            <th>ğŸ“· Capa</th>
                            <th>ğŸ® Nome</th>
                            <th>ğŸ•¹ï¸ Plataformas</th>
                            <th>ğŸ“… Ano</th>
                            <th>â¬‡ï¸ AÃ§Ã£o</th>
                        </tr>
                    </thead>
                    <tbody id="igdb-results-body">
                        <!-- Resultados -->
                    </tbody>
                </table>
            </div>

            <div class="modal-actions">
                <button type="button" class="btn" onclick="closeIgdbModal()">âŒ Fechar</button>
            </div>
        </div>
    </div>

    <!-- MODAL: Criar/Editar Comando -->
    <div id="command-modal" class="modal hidden">
        <div class="modal-content">
            <h3 id="command-modal-title">âœï¸ Editar Comando</h3>
            <form id="command-form">
                <input type="hidden" id="cmd-name-original">
                <input type="hidden" id="cmd-is-editing">

                <div class="form-group">
                    <label>ğŸ’¬ Comando</label>
                    <input type="text" id="cmd-name" placeholder="!meucomando" required>
                </div>

                <div class="form-group">
                    <label>ğŸ“ DescriÃ§Ã£o</label>
                    <input type="text" id="cmd-description" placeholder="DescriÃ§Ã£o do comando">
                </div>

                <div class="form-group" id="cmd-response-group">
                    <label>ğŸ’­ Mensagem de Resposta
                        <small style="color: var(--text-muted); display: block; margin-top: 5px;">
                            ğŸ”§ VariÃ¡veis: {user}, {balance}, {boxes}, {level}
                        </small>
                    </label>
                    <textarea id="cmd-response" rows="3" placeholder="Ex: OlÃ¡ {user}! VocÃª tem {balance} moedas ğŸ’°"
                        style="width: 100%; padding: 12px; background: rgba(0, 0, 0, 0.3); border: 1px solid var(--glass-border); border-radius: 8px; color: #fff; font-size: 0.95rem; resize: vertical; font-family: 'Outfit', sans-serif;"></textarea>
                </div>

                <div class="form-group">
                    <label>ğŸ”— Aliases (separados por vÃ­rgula)</label>
                    <input type="text" id="cmd-aliases" placeholder="Ex: !atalho1, !atalho2">
                </div>

                <div class="form-group">
                    <label>â±ï¸ Cooldown (segundos)</label>
                    <input type="number" id="cmd-cooldown" value="3" required>
                </div>

                <div class="form-group">
                    <label>ğŸ” PermissÃ£o</label>
                    <select id="cmd-level">
                        <option value="viewer">ğŸ‘¤ Viewer</option>
                        <option value="admin">ğŸ‘‘ Admin</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>
                        <input type="checkbox" id="cmd-enabled" checked> âœ… Habilitado
                    </label>
                </div>

                <div class="modal-actions">
                    <button type="button" class="btn" onclick="closeCommandModal()">âŒ Cancelar</button>
                    <button type="submit" class="btn primary">ğŸ’¾ Salvar</button>
                    <button type="button" class="btn danger hidden" id="btn-delete-command" onclick="deleteCommand()">
                        <i class="fa-solid fa-trash"></i> ğŸ—‘ï¸ Deletar
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- MODAL: Status do UsuÃ¡rio -->
    <div id="user-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 600px;">
            <h3 id="user-modal-title">ğŸ‘¤ Status do UsuÃ¡rio</h3>
            <div id="user-stats-content" style="margin-top: 20px;">
                <div style="display: flex; gap: 20px; margin-bottom: 20px;">
                    <div
                        style="flex: 1; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.9rem; color: var(--text-muted);">ğŸ”¢ NÃ­vel</div>
                        <div id="user-level-display" style="font-size: 2rem; font-weight: bold; color: var(--primary);">
                            1</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);" id="user-xp-display">0 XP</div>
                    </div>
                    <div
                        style="flex: 1; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.9rem; color: var(--text-muted);">ğŸ’° Moedas</div>
                        <div id="user-coins-display"
                            style="font-size: 1.5rem; font-weight: bold; color: var(--warning);">0</div>
                    </div>
                    <div
                        style="flex: 1; background: rgba(255,255,255,0.05); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 0.9rem; color: var(--text-muted);">ğŸ“¦ Caixas</div>
                        <div id="user-boxes-display"
                            style="font-size: 1.5rem; font-weight: bold; color: var(--secondary);">0</div>
                    </div>
                </div>

                <h4 style="margin-bottom: 10px; border-bottom: 1px solid var(--glass-border); padding-bottom: 5px;">
                    ğŸ’ InventÃ¡rio
                </h4>
                <div id="user-inventory-stats"
                    style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 20px;">
                    <!-- Stats de raridade -->
                </div>

                <h4 style="margin-bottom: 10px; border-bottom: 1px solid var(--glass-border); padding-bottom: 5px;">
                    ğŸ® Ãšltimos Jogos
                </h4>
                <ul id="user-recent-games" style="list-style: none; padding: 0; font-size: 0.9rem;">
                    <!-- Lista de jogos -->
                </ul>
            </div>
            <div class="modal-actions">
                <button type="button" class="btn" onclick="closeUserModal()">âŒ Fechar</button>
            </div>
        </div>
    </div>

    <script src="js/app.js"></script>
</body>

</html>